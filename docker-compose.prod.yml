# 本番モード用のオーバーライド設定
# 使い方: docker-compose -f docker-compose.yml -f docker-compose.prod.yml up --build
version: "3.9"

services:
  app:
    environment:
      NODE_ENV: production
      DB_BOOT_MODE: persist  # 本番では永続化モード推奨
    ports:
      - "3000:3000" # Next.js (production)
      - "8888:8888" # HTTP (Caddy)
      - "443:443"   # HTTPS (Caddy)
      # 本番では PostgreSQL ポートを外部公開しない（セキュリティ）
      # - "5432:5432"
